<div class="time-info">
    <div class="card ">
        <form #timeInfoForm="ngForm" class="form-horizontal">
            <div class="clearfix">
                <div class="card-header card-header-text pull-left" data-background-color="orange">
                    <h6 class="card-title">{{l("BusinessCenter.Booking.TimeInfo")}}</h6>
                </div>
                <div class="pull-right add-time">
                    <span (click)="createTimeField()" class="btn btn-border-radius light-bgcolor"><span class="vapps-icon vapps-icon-app-add-booking-item"></span>添加时段</span>
                </div>
            </div>

            <div class="card-content clearfix">
                <!-- 创建时间段 -->
                <div style="width: 100%;" *ngIf="isCreateTimeField" class="clearfix">
                    <div class="col-md-6 time-info-wrap create-time-info box-shadow border-radius-14 pull-left paddingTop-32">
                        <div class="xiaoyuyue-title-box"></div>
                        <div class="time-item clearfix clearfix">
                            <div class="col-md-3 text-right label-on-left"><span>{{l("BusinessCenter.Booking.BookingPeopleOfNumber")}}</span></div>
                            <div class="col-md-9 row input-box">
                                <div class="col-md-9">
                                    <div class="form-group label-floating is-empty">
                                        <label class="control-label"></label>
                                        <input class="form-control" type="number" name="maxBookingNum" [(ngModel)]="localSingleBookingItem.maxBookingNum" required
                                            autofocus>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="time-item clearfix">
                            <div class="col-md-3 text-right label-on-left"><span>{{l("BusinessCenter.Booking.QueuePeopleOfNumber")}}</span></div>
                            <div class="col-md-9 row input-box">
                                <div class="col-md-9">
                                    <div class="form-group label-floating is-empty">
                                        <label class="control-label"></label>
                                        <input class="form-control" type="number" name="maxQueueNum" [(ngModel)]="localSingleBookingItem.maxQueueNum" required>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="time-item clearfix booking-date-item">
                            <div class=" col-md-3 text-right label-on-left"><span>{{l("BusinessCenter.Booking.BookingDate")}}</span></div>
                            <div class="col-md-9 row input-box">
                                <div class="col-md-9">
                                    <div class="form-group label-floating is-empty">
                                        <label class="control-label"></label>
                                        <div id="timeInfoFlatpickr" class="flatpickr-wrap">
                                            <input class="form-control" type="text" name="bookingDate" placeholder="请选择日期" [(ngModel)]="localSingleBookingItem.availableDates"
                                                data-input required>

                                            <a class="input-button flatpickr-toggle" title="切换" data-toggle>
                                                <i class="icon-calendar"></i>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="time-item clearfix booking-time-item clearfix clearfix" style="height: 100%">
                            <div class="col-md-3 text-righ label-on-left"><span>{{l("BusinessCenter.Booking.BookingTime")}}</span></div>
                            <div class="col-md-9 row input-box clearfix">
                                <div *ngFor="let bookingTimeItem of allBookingTime; let index = index;" class="item">
                                    <div class="form-group">
                                        <div class="col-md-9" style="padding-right: 0; padding-left: 0;">
                                            <label class="control-label"></label>
                                            <div class="col-md-6">
                                                <kendo-dateinput [format]="'HH:mm'" [(value)]="bookingTimeItem[0]"></kendo-dateinput>
                                            </div>
                                            <div class="col-md-6">
                                                <kendo-dateinput [format]="'HH:mm'" [(value)]="bookingTimeItem[1]"></kendo-dateinput>
                                            </div>
                                        </div>
                                        <div *ngIf="showAddTimeIcon(index)" class="add-time-btn-wrap pull-right box-shadow" (click)="addTimeField()"><span class="vapps-icon-cb-add-time"></span></div>
                                        <div *ngIf="!showAddTimeIcon(index)" class="add-time-btn-wrap pull-right box-shadow" (click)="removeTimeField(index)"><span class="vapps-icon-dc-customer-vip"></span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="time-item clearfix submit-item">
                            <button class="btn primary-bgcolor" (click)="save()" [(disabled)]="!timeInfoForm.form.valid"><span class="vapps-icon vapps-icon-app-confirm"></span>保存</button>
                            <button class="btn btn-cancel" (click)="cancel()"><span class="vapps-icon vapps-icon-app-cancel"></span>取消</button>
                        </div>
                    </div>
                </div>

                <!-- 创建状态的展示时间段 -->
                <div *ngIf="isCreateOrEdit; else hasTimeInfo">
                    <div *ngIf="isShowTimeField">
                        <div *ngFor="let bookingItem of localAllBookingItem; let index = index;" class="col-lg-4 col-md-6 col-sm-12 view-time-info pull-left">
                            <div class="box-shadow  border-radius-14 paddingTop-32 time-info-wrap">
                                <div class="xiaoyuyue-title-box hover">
                                    {{bookingItem.hourOfDay}}
                                </div>
                                <div class="btn-action-wrap">
                                    <span class="icon vapps-icon-app-copy-2" (click)="copyBookingItem(index)" title="复制"></span>
                                    <span class="icon vapps-icon-app-edit" (click)="editBookingItem(index)" title="编辑"></span>
                                    <span class="icon vapps-icon-app-delete" (click)="removeBookingItem(index)" title="移除"></span>
                                </div>
                                <div class="time-item clearfix">
                                    <div class="name col-lg-4 col-md-6 col-sm-12 text-right"><span>{{l("BusinessCenter.Booking.BookingPeopleOfNumber")}}</span></div>
                                    <div class="col-lg-6 col-md-7 col-sm-8 view-box">
                                        {{bookingItem.maxBookingNum}}
                                    </div>
                                </div>
                                <div class="time-item clearfix">
                                    <div class=" name col-lg-4 col-md-6 col-sm-12 text-right"><span>{{l("BusinessCenter.Booking.QueuePeopleOfNumber")}}</span></div>
                                    <div class="col-lg-6 col-md-7 col-sm-8 view-box">
                                        {{bookingItem.maxQueueNum}}
                                    </div>
                                </div>
                                <div class="time-item clearfix">
                                    <div class=" name col-lg-4 col-md-6 col-sm-12 text-right"><span>{{l("BusinessCenter.Booking.BookingDate")}}</span></div>
                                    <div class="col-lg-6 col-md-7 col-sm-8 view-box text-overflow">
                                        {{bookingItem.availableDates}}
                                    </div>
                                </div>
                                <div class="time-item clearfix">
                                    <div class="name col-lg-4 col-md-6 col-sm-12 text-right"><span>{{l("BusinessCenter.Booking.BookingTime")}}</span></div>
                                    <div class="col-lg-6 col-md-7 col-sm-8 view-box text-overflow">
                                        {{bookingItem.hourOfDay}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 编辑状态的展示时间段 -->
                <ng-template #hasTimeInfo>
                    <div *ngFor="let timeInfoItem of timeInfo; let index = index;" class="col-lg-4 col-md-6 col-sm-12 view-time-info pull-left">
                        <div class="box-shadow border-radius-14 time-info-wrap paddingTop-32">
                            <div class="xiaoyuyue-title-box hover">
                                {{timeInfoItem.hourOfDay}}
                            </div>
                            <div class="btn-action-wrap">
                                <span class="icon vapps-icon-app-copy-2" (click)="copyBookingItem(index)" title="复制"></span>
                                <span class="icon vapps-icon-app-edit" (click)="editBookingItem(index)" title="编辑"></span>
                                <span class="icon vapps-icon-app-delete" (click)="removeBookingItem(index)" title="移除"></span>
                            </div>
                            <div class="time-item clearfix">
                                <div class="name col-lg-6 col-md-5 col-sm-4 text-right"><span>{{l("BusinessCenter.Booking.BookingPeopleOfNumber")}}</span></div>
                                <div class="col-lg-6 col-md-7 col-sm-8 view-box">
                                    {{timeInfoItem.maxBookingNum}}
                                </div>
                            </div>
                            <div class="time-item clearfix">
                                <div class="name col-lg-6 col-md-5 col-sm-4 text-right"><span>{{l("BusinessCenter.Booking.QueuePeopleOfNumber")}}</span></div>
                                <div class="col-lg-6 col-md-7 col-sm-8 view-box">
                                    {{timeInfoItem.maxQueueNum}}
                                </div>
                            </div>
                            <div class="time-item clearfix">
                                <div class="name col-lg-6 col-md-5 col-sm-4 text-right"><span>{{l("BusinessCenter.Booking.BookingDate")}}</span></div>
                                <div class="col-lg-6 col-md-7 col-sm-8 view-box text-overflow">
                                    {{timeInfoItem.availableDates}}
                                </div>
                            </div>
                            <div class="time-item clearfix">
                                <div class="name col-lg-6 col-md-5 col-sm-4 text-right"><span>{{l("BusinessCenter.Booking.BookingTime")}}</span></div>
                                <div class="col-lg-6 col-md-7 col-sm-8 view-box text-overflow">
                                    {{timeInfoItem.hourOfDay}}
                                </div>
                            </div>
                        </div>
                    </div>
                </ng-template>
                <!--<div (click)="createTimeField()" class="add-time-btn-wrap pull-left box-shadow"><span class="vapps-icon-cb-add-time"></span></div>-->
            </div>
        </form>
    </div>
</div>